<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Servicios del spa</title>
    <!-- slider stylesheet -->
    <link rel="stylesheet" type="text/css"
          href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.1.3/assets/owl.carousel.min.css"/>

    <!-- bootstrap core css -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css"/>

    <!-- fonts style -->
    <link href="https://fonts.googleapis.com/css?family=Dosis:400,500|Poppins:400,700&display=swap" rel="stylesheet"/>
    <!-- Custom styles for this template -->
    <link href="css/style.css" rel="stylesheet"/>
    <!-- responsive style -->
    <link href="css/responsive.css" rel="stylesheet"/>

    <link href="css/style-formulario.css" rel="stylesheet"/>
</head>

<body class="hero_area">

<section>
<div class="hero_area_header">
    <!-- header section strats -->
    <header class="header_section">
        <div class="container-fluid">
            <nav class="navbar navbar-expand-lg custom_nav-container pt-3">
                <a class="navbar-brand" href="index.html">
                    <img src="images/logo.png" alt=""/>
                    <span>
                        SUMAQ SPA
                    </span>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent"
                        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <div class="d-flex ml-auto flex-column flex-lg-row align-items-center">
                        <ul class="navbar-nav  ">
                            <li class="nav-item active">
                                <a class="nav-link" href="index.html">Inicio<span class="sr-only">(current)</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="about.html">Nosotros</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="contact.html">Contacto</a>
                            </li>
                            <li class="nav-item" id="login-nav-item">
                                <a class="nav-link" href="login.html">Login</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
    </header>
    <!-- end header section -->
    <div class="hero_area_form">
        <main>
            <!-- Formulario de reserva -->
            <form id="formulario" onsubmit="return validarFormulario()">
                <label for="nombre">Nombre completo:</label>
                <input type="text" id="nombre" name="nombre" required readonly style="background-color: #f0f0f0;">

                <label for="correo">Correo electrónico:</label>
                <input type="email" id="correo" name="correo" required readonly style="background-color: #f0f0f0;">

                <label for="telefono">Teléfono:</label>
                <input type="tel" id="telefono" name="telefono" required readonly style="background-color: #f0f0f0;">

                <label for="fecha">Fecha de reserva:</label>
                <input type="date" id="fecha" name="fecha" required>

                <label for="hora">Hora de reserva:</label>
                <select id="hora" name="hora" required></select>
                <p id="horarios-disponibles-mensaje"></p>

                <!-- Campos ocultos para enviar los tratamientos seleccionados y el total -->
                <input type="hidden" name="tratamiento" id="tratamiento">
                <input type="hidden" name="total" id="total">

                <!-- Mostrar tratamientos seleccionados -->
                <div class="mt-3 mb-3" style="margin-top: 20px;">
                    <h5>Tratamientos seleccionados:</h5>
                    <ul id="cart-items" style="list-style: none; padding: 0;"></ul>
                    <p id="total-price" style="font-weight: bold; font-size: 1.2em;">Total: $0</p>
                </div>

                <input type="submit" value="Reservar">
            </form>

            <!-- Contenedor para mostrar los tratamientos seleccionados -->
            <div id="selected-treatments"></div>
        </main>
    </div>
</div>
</section>
<section class="container-fluid footer_section">
    <p>
        &copy; 2025 Todos los derechos reservados.
    </p>
</section>
<!-- Script para autocompletar datos del usuario -->
<script src="/js/auth-bar.js"></script>
<script>
// Autocompletar datos del usuario logueado
document.addEventListener('DOMContentLoaded', () => {
    const userInfo = localStorage.getItem('user_info');

    if (!userInfo) {
        // Si no hay usuario logueado, redirigir a login
        alert('Debes iniciar sesión para hacer una reserva');
        window.location.href = 'login.html';
        return;
    }

    const user = JSON.parse(userInfo);

    // Autocompletar campos del usuario
    const nombreInput = document.getElementById('nombre');
    const correoInput = document.getElementById('correo');
    const telefonoInput = document.getElementById('telefono');

    if (nombreInput && user.nombre) nombreInput.value = user.nombre;
    if (correoInput && user.email) correoInput.value = user.email;
    if (telefonoInput && user.telefono) telefonoInput.value = user.telefono;
});
</script>

<!-- Scripts para validación y procesamiento de la reserva -->
<script type="text/javascript" src="/js/procesarReserva.js"></script>
<script type="text/javascript" src="/js/validacionForm.js"></script>

</body>

</html>
